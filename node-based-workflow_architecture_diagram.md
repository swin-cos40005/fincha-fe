# Workflow System Architecture Diagram

## System Overview
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        UNIFIED WORKFLOW SYSTEM                            │
│                    (Main Orchestrator)                                    │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                    ┌───────────────┼───────────────┐
                    │               │               │
            ┌───────▼──────┐ ┌─────▼─────┐ ┌──────▼──────┐
            │ Workflow     │ │ Dashboard │ │ Connection  │
            │ Manager      │ │ Manager   │ │ Manager     │
            └──────────────┘ └───────────┘ └─────────────┘
                    │               │               │
            ┌───────▼──────┐ ┌─────▼─────┐ ┌──────▼──────┐
            │ Node         │ │ Visual    │ │ Connection  │
            │ Execution    │ │ Artifacts │ │ Validation  │
            └──────────────┘ └───────────┘ └─────────────┘
```

## Data Flow Architecture
```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   Input     │───▶│ Processing  │───▶│ Analysis    │───▶│ Visualization│
│   Nodes     │    │   Nodes     │    │   Nodes     │    │   Nodes     │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │                   │
       ▼                   ▼                   ▼                   ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ CSV Input   │    │ Row Filter  │    │ Statistical │    │ Chart       │
│ DB Input    │    │ Col Filter  │    │ Analysis    │    │ Dashboard    │
│ Table       │    │ Aggregation │    │ ML Models   │    │ Reports      │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
```

## Execution Engine Flow
```
┌─────────────────┐
│   Start         │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ Find Root Nodes │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ Check Dependencies│
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ Execute Node    │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ Process Outputs │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ Trigger Successors│
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ All Complete?   │
└─────────┬───────┘
          │
    ┌─────┴─────┐
    ▼           ▼
┌─────────┐ ┌─────────┐
│   Yes   │ │   No    │
└────┬────┘ └────┬────┘
     │            │
     ▼            │
┌─────────┐       │
│  End    │◄──────┘
└─────────┘
```

## Component Relationships
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           USER INTERFACE                                  │
│                    (React Components)                                     │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                        UNIFIED WORKFLOW SYSTEM                            │
│                    (Main API Entry Point)                                │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
        ┌───────────────────────────┼───────────────────────────┐
        │                           │                           │
        ▼                           ▼                           ▼
┌─────────────┐           ┌─────────────┐           ┌─────────────┐
│ Workflow    │           │ Dashboard   │           │ Connection  │
│ Manager     │           │ Manager     │           │ Manager     │
└─────────────┘           └─────────────┘           └─────────────┘
        │                           │                           │
        ▼                           ▼                           ▼
┌─────────────┐           ┌─────────────┐           ┌─────────────┐
│ Execution   │           │ Visual      │           │ Validation  │
│ Engine      │           │ Artifacts   │           │ Logic       │
└─────────────┘           └─────────────┘           └─────────────┘
        │                           │                           │
        ▼                           ▼                           ▼
┌─────────────┐           ┌─────────────┐           ┌─────────────┐
│ Node        │           │ Database    │           │ Error       │
│ Registry    │           │ Storage     │           │ Handling    │
└─────────────┘           └─────────────┘           └─────────────┘
```

## Node Types Hierarchy
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              NODE TYPES                                   │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
        ┌───────────────────────────┼───────────────────────────┐
        │                           │                           │
        ▼                           ▼                           ▼
┌─────────────┐           ┌─────────────┐           ┌─────────────┐
│ DATA        │           │ PROCESSING  │           │ ANALYSIS    │
│ SOURCES     │           │ NODES       │           │ NODES       │
└─────────────┘           └─────────────┘           └─────────────┘
│ • CSV Input │           │ • Row Filter│           │ • Statistical│
│ • DB Input  │           │ • Col Filter│           │ • ML Models │
│ • Table     │           │ • Aggregate │           │ • Regression│
└─────────────┘           └─────────────┘           └─────────────┘
        │                           │                           │
        └───────────────────────────┼───────────────────────────┘
                                    │
                                    ▼
                        ┌─────────────────────┐
                        │ VISUALIZATION       │
                        │ NODES              │
                        └─────────────────────┘
                        │ • Charts (Bar, Line)│
                        │ • Tables           │
                        │ • Dashboards       │
                        └─────────────────────┘
```

## Error Handling Flow
```
┌─────────────────┐
│ Node Execution  │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ Try Execute     │
└─────────┬───────┘
          │
    ┌─────┴─────┐
    ▼           ▼
┌─────────┐ ┌─────────┐
│ Success │ │  Error  │
└────┬────┘ └────┬────┘
     │            │
     ▼            ▼
┌─────────┐ ┌─────────┐
│ Continue│ │ Log     │
│ Flow    │ │ Error   │
└─────────┘ └────┬────┘
                  │
                  ▼
            ┌─────────┐
            │ Isolate │
            │ Error   │
            └────┬────┘
                 │
                 ▼
            ┌─────────┐
            │ Continue│
            │ Other   │
            │ Nodes   │
            └─────────┘
```

## Storage Architecture
```
┌─────────────────┐
│ Workflow Data   │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ Serialize       │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ Storage Manager │
└─────────┬───────┘
          │
    ┌─────┴─────┐
    ▼           ▼
┌─────────┐ ┌─────────┐
│ Database│ │ File    │
│ Storage │ │ Export  │
└─────────┘ └─────────┘
```

This architecture provides a robust, scalable, and maintainable system for visual data analysis workflows, enabling users to create complex data processing pipelines through an intuitive interface. 